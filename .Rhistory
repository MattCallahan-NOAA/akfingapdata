library(akfingapdata)
hello()
get_gap_biomass<-function(area_id, species_code) {
# paste(... collapse=",") puts commas between vector elements
area_id <- paste(area_id, collapse = ",")
species_code <- paste(species_code, collapse = ",")
query <- list(area_id, species_code)
url <- "https://apex.psmfc.org/akfin/data_marts/akmp/gap_biomass?"
httr::content(
httr::GET(url=url, query=query)),
get_gap_biomass<-function(area_id, species_code) {
# paste(... collapse=",") puts commas between vector elements
area_id <- paste(area_id, collapse = ",")
species_code <- paste(species_code, collapse = ",")
query <- list(area_id, species_code)
url <- "https://apex.psmfc.org/akfin/data_marts/akmp/gap_biomass?"
httr::content(
httr::GET(url=url, query=query),
type = "application/json") %>%
# convert to data frame
dplyr::bind_rows() %>%
dplyr::rename_with(tolower)
}
#test
lc<-get_gap_biomass(area_id=40, species_code=21910)
#test
library(magrittr)
lc<-get_gap_biomass(area_id=40, species_code=21910)
get_gap_biomass<-function(area_id, species_code) {
# paste(... collapse=",") puts commas between vector elements
#area_id <- paste(area_id, collapse = ",")
#species_code <- paste(species_code, collapse = ",")
query <- list(area_id, species_code)
url <- "https://apex.psmfc.org/akfin/data_marts/akmp/gap_biomass?"
httr::content(
httr::GET(url=url, query=query),
type = "application/json") %>%
# convert to data frame
dplyr::bind_rows() %>%
dplyr::rename_with(tolower)
}
lc<-get_gap_biomass(area_id=40, species_code=21910)
get_gap_biomass<-function(area_id, species_code) {
# paste(... collapse=",") puts commas between vector elements
area_id <- paste(area_id, collapse = ",")
species_code <- paste(species_code, collapse = ",")
# httr code, parameters are after the '?'
httr::content(
httr::GET(paste0("https://apex.psmfc.org/akfin/data_marts/akmp/gap_biomass?area_id=",
area_id,
"&species_code=",
species_code)),
type = "application/json") %>%
# convert to data frame
bind_rows()
}
lc<-get_gap_biomass(area_id=40, species_code=21910)
get_gap_biomass<-function(area_id, species_code) {
# paste(... collapse=",") puts commas between vector elements
area_id <- paste(area_id, collapse = ",")
species_code <- paste(species_code, collapse = ",")
# httr code, parameters are after the '?'
httr::content(
httr::GET(paste0("https://apex.psmfc.org/akfin/data_marts/akmp/gap_biomass?area_id=",
area_id,
"&species_code=",
species_code)),
type = "application/json") %>%
# convert to data frame
dplyr::bind_rows()%>%
dplyr::rename_with(tolower)
}
#test
#library(magrittr)
lc<-get_gap_biomass(area_id=40, species_code=21910)
get_gap_biomass<-function(area_id, species_code) {
# paste(... collapse=",") puts commas between vector elements
#area_id <- paste(area_id, collapse = ",")
#species_code <- paste(species_code, collapse = ",")
query <- list(area_id=area_id, species_code=species_code)
url <- "https://apex.psmfc.org/akfin/data_marts/akmp/gap_biomass?"
httr::content(
httr::GET(url=url, query=query),
type = "application/json") %>%
# convert to data frame
dplyr::bind_rows() %>%
dplyr::rename_with(tolower)
}
#test
#library(magrittr)
lc<-get_gap_biomass(area_id=40, species_code=21910)
#test
#library(magrittr)
lc<-get_gap_biomass(area_id=c(40, 41), species_code=21910)
get_gap_biomass<-function(area_id, species_code) {
# paste(... collapse=",") puts commas between vector elements
area_id <- paste(area_id, collapse = ",")
species_code <- paste(species_code, collapse = ",")
query <- list(area_id=area_id, species_code=species_code)
url <- "https://apex.psmfc.org/akfin/data_marts/akmp/gap_biomass?"
httr::content(
httr::GET(url=url, query=query),
type = "application/json") %>%
# convert to data frame
dplyr::bind_rows() %>%
dplyr::rename_with(tolower)
}
#test
#library(magrittr)
lc<-get_gap_biomass(area_id=c(40, 41), species_code=21910)
get_gap_biomass<-function(area_id=40, species_code=21010) {
# paste(... collapse=",") puts commas between vector elements
area_id <- paste(area_id, collapse = ",")
species_code <- paste(species_code, collapse = ",")
query <- list(area_id=area_id, species_code=species_code)
url <- "https://apex.psmfc.org/akfin/data_marts/akmp/gap_biomass?"
httr::content(
httr::GET(url=url, query=query),
type = "application/json") %>%
# convert to data frame
dplyr::bind_rows() %>%
dplyr::rename_with(tolower)
}
#test
#library(magrittr)
lc<-get_gap_biomass()
lc<-get_gap_biomass(area_id=c(40, 41), species_code=21910)
library(httr)
library(dplyr)
start<- Sys.time()
data_fx<-get_gap_biomass()
end<-Sys.time()
fx_time<-end-start
fx_time
start<- Sys.time()
data2<-httr::content(
httr::GET(paste0("https://apex.psmfc.org/akfin/data_marts/akmp/gap_biomass?area_id=40&species_code=21010")),
type = "application/json")
end<-Sys.time()
httr_time<-end-start
httr_time
get_gap_biomass<-function(area_id=40, species_code=21010, start_year=1990, end_year=3000) {
# paste(... collapse=",") puts commas between vector elements
area_id <- paste(area_id, collapse = ",")
species_code <- paste(species_code, collapse = ",")
query <- list(area_id=area_id, species_code=species_code, start_year=start_year, end_year=end_year)
url <- "https://apex.psmfc.org/akfin/data_marts/akmp/gap_biomass?"
httr::content(
httr::GET(url=url, query=query),
type = "application/json") %>%
# convert to data frame
dplyr::bind_rows() %>%
dplyr::rename_with(tolower)
}
start<-Sys.time()
lc<-get_gap_biomass()
end<-Sys.time()
end-start
start<-Sys.time()
lc<-get_gap_biomass(start_year=1975)
end<-Sys.time()
end-start
library(akfingapdata)
start<-Sys.time()
lc<-get_gap_biomass(start_year=1975)
end<-Sys.time()
end-start
